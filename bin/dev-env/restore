#!/usr/bin/env bash
set -euo pipefail

echo "🚀 Starting full dev environment restore..."

# Step 1: Bootstrap core tools, configs, and dotfiles
echo "🔧 Bootstrapping system with init-machine..."
"$HOME/bin/bootstrap/init-machine"

# Step 2: Restore secrets from Bitwarden or backup
echo "🔐 Restoring secrets from backup..."
"$HOME/bin/secrets/restore.sh"

# Step 3: Run final setup (like plugins, completions, terminal tweaks)
echo "🧩 Running post-restore setup..."
"$HOME/bin/dev-env/finalize"

echo "✅ Dev environment restored successfully!"
